{% extends 'base.html' %}
{% load static %}



{% block styles %}
<style>
  
</style>
{% endblock styles %}
  

{% block content %}
<div class="pagetitle">
  <h1>Dashboard</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
      <li class="breadcrumb-item active">Dashboard</li>
    </ol>
  </nav>
</div><!-- End Page Title -->

<section class="section dashboard">
  <div class="row">

    <div class="col-12 col-lg-12">
      <div class="card p-2 rounded-3">
        <figure class="p-3 rounded-5 bg-white">
          <canvas id="chart" width="900" height="400"></canvas>
      </figure>
      </div>
    </div>

  </div>
</section>

{% endblock content %}

{% block scripts %}
<script src="{% static 'assets/js/chart.min.js' %}"></script>

<script>
    const data = JSON.parse("{{ data|escapejs }}")
    console.log(data)
    const ctx = document.getElementById('chart').getContext('2d');
    const xlabels = []
    const ysales = []
    data.forEach(item => {
        xlabels.push(item.date)
        ysales.push(item.count)
    })
    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: xlabels,
            datasets: [{
                label: 'Attendance',
                data: ysales,
                borderColor: 'rgba(255, 215, 0)',
                borderWidth: 1
            }]
        }
    });
</script>
{% endblock scripts %}